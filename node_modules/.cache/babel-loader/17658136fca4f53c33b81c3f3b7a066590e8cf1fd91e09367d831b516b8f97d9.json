{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\Projetyacine\\\\agence-voyage\\\\src\\\\components\\\\ReservationForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { gql, useMutation } from '@apollo/client';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CREATE_RESERVATION = gql`\n  mutation CreateReservation($input: ReservationInput!) {\n    createReservation(input: $input) {\n      reservation {\n        id\n        nom\n        prenom\n        email\n        destination\n        dateVoyage\n        nombrePersonnes\n        statut\n      }\n    }\n  }\n`;\nexport default function ReservationForm() {\n  _s();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    nom: '',\n    prenom: '',\n    email: '',\n    destination: '',\n    dateVoyage: '',\n    nombrePersonnes: 1\n  });\n  const [errors, setErrors] = useState({});\n  const [success, setSuccess] = useState(false);\n  const [createReservation, {\n    loading,\n    error\n  }] = useMutation(CREATE_RESERVATION, {\n    onCompleted() {\n      setSuccess(true);\n      setTimeout(() => {\n        navigate('/reservations');\n      }, 1500);\n    }\n  });\n  const validate = () => {\n    const newErrors = {};\n    if (!formData.nom.trim()) newErrors.nom = 'Le nom est obligatoire';\n    if (!formData.prenom.trim()) newErrors.prenom = 'Le prénom est obligatoire';\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) newErrors.email = \"L'email est invalide\";\n    if (!formData.destination.trim()) newErrors.destination = 'La destination est obligatoire';\n    if (!formData.dateVoyage) newErrors.dateVoyage = 'La date est obligatoire';\n    if (formData.nombrePersonnes < 1) newErrors.nombrePersonnes = 'Minimum 1 personne';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === 'nombrePersonnes' ? parseInt(value) || 1 : value\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!validate()) return;\n    createReservation({\n      variables: {\n        input: formData\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"max-w-xl mx-auto p-6 bg-white rounded-xl shadow-md space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold text-blue-800 text-center\",\n      children: \"R\\xE9server un voyage\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-green-600 text-center\",\n      children: \"R\\xE9servation r\\xE9ussie !\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }, this), [{\n      name: 'nom',\n      label: 'Nom'\n    }, {\n      name: 'prenom',\n      label: 'Prénom'\n    }, {\n      name: 'email',\n      label: 'Email',\n      type: 'email'\n    }, {\n      name: 'destination',\n      label: 'Destination'\n    }, {\n      name: 'dateVoyage',\n      label: 'Date du voyage',\n      type: 'date'\n    }, {\n      name: 'nombrePersonnes',\n      label: 'Nombre de personnes',\n      type: 'number'\n    }].map(({\n      name,\n      label,\n      type = 'text'\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: name,\n        className: \"block font-semibold mb-1 text-blue-700\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: type,\n        id: name,\n        name: name,\n        value: formData[name],\n        onChange: handleChange,\n        className: `w-full border rounded-md p-3 text-lg ${errors[name] ? 'border-red-500' : 'border-gray-300'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), errors[name] && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-sm mt-1\",\n        children: errors[name]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 28\n      }, this)]\n    }, name, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: loading,\n      className: \"w-full bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 rounded-xl shadow disabled:opacity-50\",\n      children: loading ? 'Réservation...' : 'Réserver'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-600 text-center mt-2\",\n      children: [\"Erreur : \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(ReservationForm, \"GNbmtG8WkGHrmyxrMLpsqiUTAhI=\", false, function () {\n  return [useNavigate, useMutation];\n});\n_c = ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["React","useState","gql","useMutation","useNavigate","jsxDEV","_jsxDEV","CREATE_RESERVATION","ReservationForm","_s","navigate","formData","setFormData","nom","prenom","email","destination","dateVoyage","nombrePersonnes","errors","setErrors","success","setSuccess","createReservation","loading","error","onCompleted","setTimeout","validate","newErrors","trim","emailRegex","test","Object","keys","length","handleChange","e","name","value","target","prev","parseInt","handleSubmit","preventDefault","variables","input","onSubmit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","label","type","map","htmlFor","id","onChange","disabled","message","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/Projetyacine/agence-voyage/src/components/ReservationForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { gql, useMutation } from '@apollo/client';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst CREATE_RESERVATION = gql`\r\n  mutation CreateReservation($input: ReservationInput!) {\r\n    createReservation(input: $input) {\r\n      reservation {\r\n        id\r\n        nom\r\n        prenom\r\n        email\r\n        destination\r\n        dateVoyage\r\n        nombrePersonnes\r\n        statut\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function ReservationForm() {\r\n  const navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    nom: '',\r\n    prenom: '',\r\n    email: '',\r\n    destination: '',\r\n    dateVoyage: '',\r\n    nombrePersonnes: 1,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const [createReservation, { loading, error }] = useMutation(CREATE_RESERVATION, {\r\n    onCompleted() {\r\n      setSuccess(true);\r\n      setTimeout(() => {\r\n        navigate('/reservations');\r\n      }, 1500);\r\n    },\r\n  });\r\n\r\n  const validate = () => {\r\n    const newErrors = {};\r\n    if (!formData.nom.trim()) newErrors.nom = 'Le nom est obligatoire';\r\n    if (!formData.prenom.trim()) newErrors.prenom = 'Le prénom est obligatoire';\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(formData.email)) newErrors.email = \"L'email est invalide\";\r\n    if (!formData.destination.trim()) newErrors.destination = 'La destination est obligatoire';\r\n    if (!formData.dateVoyage) newErrors.dateVoyage = 'La date est obligatoire';\r\n    if (formData.nombrePersonnes < 1) newErrors.nombrePersonnes = 'Minimum 1 personne';\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: name === 'nombrePersonnes' ? parseInt(value) || 1 : value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!validate()) return;\r\n    createReservation({ variables: { input: formData } });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"max-w-xl mx-auto p-6 bg-white rounded-xl shadow-md space-y-6\">\r\n      <h1 className=\"text-2xl font-bold text-blue-800 text-center\">Réserver un voyage</h1>\r\n\r\n      {success && <p className=\"text-green-600 text-center\">Réservation réussie !</p>}\r\n\r\n      {[\r\n        { name: 'nom', label: 'Nom' },\r\n        { name: 'prenom', label: 'Prénom' },\r\n        { name: 'email', label: 'Email', type: 'email' },\r\n        { name: 'destination', label: 'Destination' },\r\n        { name: 'dateVoyage', label: 'Date du voyage', type: 'date' },\r\n        { name: 'nombrePersonnes', label: 'Nombre de personnes', type: 'number' },\r\n      ].map(({ name, label, type = 'text' }) => (\r\n        <div key={name}>\r\n          <label htmlFor={name} className=\"block font-semibold mb-1 text-blue-700\">{label}</label>\r\n          <input\r\n            type={type}\r\n            id={name}\r\n            name={name}\r\n            value={formData[name]}\r\n            onChange={handleChange}\r\n            className={`w-full border rounded-md p-3 text-lg ${errors[name] ? 'border-red-500' : 'border-gray-300'}`}\r\n          />\r\n          {errors[name] && <p className=\"text-red-500 text-sm mt-1\">{errors[name]}</p>}\r\n        </div>\r\n      ))}\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={loading}\r\n        className=\"w-full bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 rounded-xl shadow disabled:opacity-50\"\r\n      >\r\n        {loading ? 'Réservation...' : 'Réserver'}\r\n      </button>\r\n\r\n      {error && <p className=\"text-red-600 text-center mt-2\">Erreur : {error.message}</p>}\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}